--- libhdhomerun/hdhomerun_os_posix.c	2016-09-23 16:40:29.000000000 -0400
+++ libhdhomerun_new/hdhomerun_os_posix.c	2016-09-23 16:41:08.000000000 -0400
@@ -51,11 +51,7 @@ uint32_t random_get32(void)
 
 uint64_t getcurrenttime(void)
 {
-#if defined(CLOCK_MONOTONIC)
-	struct timespec t;
-	clock_gettime(CLOCK_MONOTONIC, &t);
-	return ((uint64_t)t.tv_sec * 1000) + (t.tv_nsec / 1000000);
-#elif defined(__APPLE__)
+#if defined(__APPLE__)
 	clock_serv_t clock_serv;
 	host_get_clock_service(mach_host_self(), SYSTEM_CLOCK, &clock_serv);
 
@@ -64,6 +60,10 @@ uint64_t getcurrenttime(void)
 
 	mach_port_deallocate(mach_task_self(), clock_serv);
 	return ((uint64_t)t.tv_sec * 1000) + (t.tv_nsec / 1000000);
+#elif defined(CLOCK_MONOTONIC)
+	struct timespec t;
+	clock_gettime(CLOCK_MONOTONIC, &t);
+	return ((uint64_t)t.tv_sec * 1000) + (t.tv_nsec / 1000000);
 #else
 #error no clock source for getcurrenttime()
 #endif
